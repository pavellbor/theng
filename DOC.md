В приложении основной процесс обучения строится вокруг **перевода предложений с русского на английский**, где каждое предложение специально разработано для изучения **одного целевого слова** и **одной грамматической темы**. 

Вот как выглядит логика работы приложения:

**1. Генерация упражнений (предложений для перевода):**

*   **Выбор целевого слова (Word):** Приложение выбирает слово из базы данных (`Word`), которое нужно изучить или закрепить. Выбор слова может быть основан на разных критериях:
    *   Уровень CEFR (`CEFRLevel`).
    *   Часть речи (`PartOfSpeech`).
    *   Статус изучения пользователя (`UserContentProgress`).
    *   Слова, запланированные на повторение системой интервального повторения (SRS).
    *   Случайный выбор из определенной категории слов.
*   **Выбор грамматической темы (GrammarTopic):** Приложение выбирает грамматическую тему (`GrammarTopic`), которую нужно проработать в предложении. Выбор темы также может основываться на:
    *   Уровне CEFR (`CEFRLevel`).
    *   Статусе изучения пользователя (`UserContentProgress`).
    *   Темы, запланированные на повторение SRS.
    *   Последовательное изучение тем (например, по списку тем).
*   **Генерация предложения (Sentence):**  Приложение **генерирует предложение на русском языке**, которое соответствует следующим критериям:
    *   Содержит **выбранное целевое слово** (или форму этого слова).
    *   Иллюстрирует **выбранную грамматическую тему**.
    *   Предложение должно быть **адекватным по уровню сложности** для пользователя (возможно, на основе CEFR уровня слова и грамматической темы).
    *   Приложение также **сохраняет правильный перевод этого русского предложения на английский язык** (`englishSentence` в модели `Sentence`).  Это может быть либо заранее подготовленный перевод, либо перевод, сгенерированный автоматически (если реализована продвинутая система генерации).
    *   Созданное предложение (русский и английский варианты) сохраняется в модели `Sentence`, с обязательной связью с `Word` (целевое слово) и `GrammarTopic`.

**2. Пользовательский интерфейс и процесс обучения:**

*   **Получение упражнения:** Приложение предоставляет пользователю упражнение, показывая ему **русское предложение** (`russianTranslation` из модели `Sentence`).  Целевое слово в предложении может быть выделено или подчеркнуто визуально (опционально).
*   **Перевод предложения:** Пользователь должен **перевести русское предложение на английский язык** и ввести свой перевод в приложении (текстовое поле).
*   **Проверка перевода:** Пользователь отправляет свой перевод на проверку.
*   **Оценка перевода и обратная связь:** Приложение **сравнивает перевод пользователя с правильным английским предложением** (`englishSentence` из модели `Sentence`).
    *   **Правильный перевод:** Если перевод пользователя **полностью совпадает** с правильным вариантом (или достаточно близок, если реализовано нечеткое сравнение), приложение сообщает об **успешном переводе**.
    *   **Неправильный перевод:** Если перевод **неправильный**, приложение сообщает об ошибке и показывает **правильный английский перевод** (`englishSentence`).  Желательно, чтобы приложение также предоставляло **подсказки или объяснения**, указывающие на ошибки в переводе пользователя и объясняющие правильную грамматическую конструкцию и использование целевого слова в данном контексте.  Подсказки могут акцентировать внимание на грамматической теме и целевом слове.

**3. Система интервального повторения (SRS) и отслеживание прогресса:**

*   **Отслеживание результатов перевода:** Приложение сохраняет **результат проверки перевода** для каждого упражнения (**правильно/неправильно**).  Эти данные используются для автоматической оценки сложности и системой интервального повторения.
*   **Автоматическая оценка сложности упражнения:** Приложение **автоматически оценивает сложность упражнения** на основе результата перевода:
    *   **"Правильно" (с первой попытки):** Упражнение считается **относительно легким**.
    *   **"Неправильно" (с первой попытки):** Упражнение считается **относительно сложным**.
*   **Планирование повторений на основе SRS и автоматической оценки:**  Система интервального повторения (например, SM-2) использует **результаты автоматической оценки сложности** для корректировки параметров интервального повторения и планирования **следующих упражнений для повторения**, включая предложения с определенными словами и грамматическими темами.  `nextReviewDate` в модели `UserContentProgress` будет определять, когда пользователю нужно будет повторить упражнения, связанные с определенными словами или грамматическими темами.

**Пример работы приложения (с автоматической оценкой сложности):**

1.  Система SRS определяет, что пользователю нужно повторить слова уровня A2 и грамматическую тему "Present Simple".
2.  Приложение выбирает слово "cat" (уровень A2, существительное) и тему "Present Simple".
3.  Генератор предложений создает русское предложение: "Каждый день кот спит на подоконнике."
4.  Приложение показывает пользователю русское предложение.
5.  Пользователь переводит: "Every day cat sleeps on the windowsill."
6.  Приложение проверяет перевод и сообщает, что перевод **неправильный**.  Показывает правильный перевод: "Every day the cat sleeps on the windowsill."  Подсказка: "Не забывайте использовать определенный артикль 'the' перед существительным 'cat' в Present Simple, когда речь идет о конкретном коте (в данном контексте)." (Подсказка может также указывать на ошибку в форме глагола "sleeps").
7.  **Приложение автоматически оценивает упражнение как "Сложное", так как перевод был неправильным.**
8.  Система SRS обновляет данные для слова "cat" и темы "Present Simple" в `UserContentProgress`, **учитывая автоматическую оценку сложности** и планируя следующее повторение упражнений с этими элементами.

**Преимущества такой логики:**

*   **Фокусированное обучение:**  Каждое упражнение имеет четкую цель - изучение определенного слова и грамматической темы.
*   **Контекстуальное обучение:**  Слова и грамматика изучаются в контексте предложений, что способствует лучшему пониманию и запоминанию.
*   **Практическое применение:**  Основной навык, который тренируется - это перевод, что является важным аспектом изучения языка.
*   **Интеграция SRS:**  Система интервального повторения помогает закрепить изученный материал на долгосрочной основе.
*   **Улучшенный пользовательский опыт:**  Упрощенный флоу без ручной оценки сложности, автоматическая оценка сложности делает процесс более быстрым и интуитивным.
*   **Автоматизация оценки:** Приложение автоматически и объективно оценивает сложность, что повышает эффективность SRS.